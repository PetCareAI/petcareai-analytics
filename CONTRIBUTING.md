# Guia de Contribui√ß√£o - PetCareAI Analytics

Obrigado por seu interesse em contribuir com o PetCareAI Analytics! Este documento fornece diretrizes para contribui√ß√µes que ajudem a manter a qualidade e consist√™ncia do projeto.

## üéØ Como Contribuir

### Formas de Contribui√ß√£o

- **üêõ Reportar Bugs**: Encontrou um problema? Nos ajude a corrigi-lo!
- **üí° Sugerir Funcionalidades**: Tem uma ideia interessante? Compartilhe conosco!
- **üìù Melhorar Documenta√ß√£o**: Documenta√ß√£o clara √© essencial
- **üîß Contribuir com C√≥digo**: Implementar novas funcionalidades ou corre√ß√µes
- **üß™ Escrever Testes**: Ajudar a manter a qualidade do c√≥digo
- **üé® Melhorar UI/UX**: Tornar a interface mais intuitiva
- **üåç Tradu√ß√£o**: Ajudar com internacionaliza√ß√£o

## üöÄ Come√ßando

### 1. Configura√ß√£o do Ambiente

```bash
# Fork o reposit√≥rio no GitHub
# Clone seu fork
git clone https://github.com/SEU_USUARIO/petcare-analytics.git
cd petcare-analytics

# Adicione o reposit√≥rio original como upstream
git remote add upstream https://github.com/PetCareAi/analytics.git

# Configure o ambiente
./install.sh
./configure.sh
```

### 2. Estrutura do Projeto

```
petcare-analytics/
‚îú‚îÄ‚îÄ app.py                    # Aplica√ß√£o principal
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ database.py          # Configura√ß√£o do banco
‚îú‚îÄ‚îÄ tests/                   # Testes automatizados
‚îú‚îÄ‚îÄ docs/                    # Documenta√ß√£o
‚îú‚îÄ‚îÄ assets/                  # Assets est√°ticos
‚îú‚îÄ‚îÄ data/                    # Dados tempor√°rios
‚îú‚îÄ‚îÄ models/                  # Modelos ML salvos
‚îú‚îÄ‚îÄ requirements.txt         # Depend√™ncias Python
‚îú‚îÄ‚îÄ .env.example            # Template de configura√ß√£o
‚îî‚îÄ‚îÄ README.md               # Documenta√ß√£o principal
```

### 3. Configura√ß√£o de Desenvolvimento

```bash
# Instalar depend√™ncias de desenvolvimento
pip install -r requirements-dev.txt

# Configurar pre-commit hooks
pre-commit install

# Executar testes
python -m pytest tests/

# Executar aplica√ß√£o em modo dev
./run.sh --dev
```

## üìã Processo de Contribui√ß√£o

### 1. Antes de Come√ßar

- üîç **Verifique Issues Existentes**: Procure se j√° existe uma issue relacionada
- üí¨ **Discuta Grandes Mudan√ßas**: Para funcionalidades grandes, abra uma issue primeiro
- üìñ **Leia a Documenta√ß√£o**: Familiarize-se com o projeto e arquitetura
- ‚úÖ **Configure o Ambiente**: Certifique-se que tudo est√° funcionando

### 2. Criando uma Issue

#### Para Bugs üêõ

```markdown
**Descri√ß√£o do Bug**
Descri√ß√£o clara e concisa do que est√° errado.

**Passos para Reproduzir**
1. V√° para '...'
2. Clique em '....'
3. Role para baixo at√© '....'
4. Veja o erro

**Comportamento Esperado**
Descri√ß√£o clara do que deveria acontecer.

**Comportamento Atual**
O que realmente acontece.

**Screenshots**
Se aplic√°vel, adicione screenshots para ajudar a explicar o problema.

**Ambiente:**
- OS: [ex: Ubuntu 20.04]
- Python: [ex: 3.9.0]
- Streamlit: [ex: 1.31.1]
- Navegador: [ex: Chrome 120]

**Informa√ß√µes Adicionais**
Qualquer outra informa√ß√£o sobre o problema.
```

#### Para Funcionalidades üí°

```markdown
**Descri√ß√£o da Funcionalidade**
Descri√ß√£o clara e concisa da funcionalidade desejada.

**Problema que Resolve**
Qual problema esta funcionalidade resolve? Ex: Eu sempre fico frustrado quando [...]

**Solu√ß√£o Proposta**
Descri√ß√£o clara e concisa do que voc√™ gostaria que acontecesse.

**Alternativas Consideradas**
Descri√ß√£o de solu√ß√µes alternativas ou funcionalidades que voc√™ considerou.

**Informa√ß√µes Adicionais**
Qualquer outra informa√ß√£o ou screenshots sobre a funcionalidade.
```

### 3. Workflow de Desenvolvimento

#### Criando uma Branch

```bash
# Atualize sua branch main
git checkout main
git pull upstream main

# Crie uma branch para sua feature
git checkout -b feature/nome-da-funcionalidade

# Ou para bug fix
git checkout -b bugfix/descricao-do-bug
```

#### Fazendo Commits

Seguimos o padr√£o [Conventional Commits](https://www.conventionalcommits.org/):

```bash
# Funcionalidade
git commit -m "feat(dashboard): adicionar gr√°fico de tend√™ncias"

# Bug fix
git commit -m "fix(auth): corrigir problema de timeout"

# Documenta√ß√£o
git commit -m "docs(api): adicionar exemplos de uso"

# Testes
git commit -m "test(ml): adicionar testes para clustering"
```

#### Tipos de Commit

- `feat`: Nova funcionalidade
- `fix`: Corre√ß√£o de bug
- `docs`: Documenta√ß√£o
- `style`: Formata√ß√£o, ponto e v√≠rgula faltando, etc
- `refactor`: Refatora√ß√£o de c√≥digo
- `test`: Adi√ß√£o ou corre√ß√£o de testes
- `chore`: Manuten√ß√£o de c√≥digo

### 4. Padr√µes de C√≥digo

#### Python Code Style

Seguimos o [PEP 8](https://pep8.org/) com algumas adapta√ß√µes:

```python
# ‚úÖ Bom
def calculate_adoption_score(pet_data: dict) -> float:
    """
    Calcula o score de ado√ß√£o baseado nos dados do pet.
    
    Args:
        pet_data (dict): Dados do pet contendo idade, comportamento, etc.
        
    Returns:
        float: Score de ado√ß√£o entre 0.0 e 5.0
        
    Raises:
        ValueError: Se dados obrigat√≥rios est√£o faltando
    """
    if not pet_data.get('idade'):
        raise ValueError("Idade √© obrigat√≥ria")
    
    score = 0.0
    
    # Calcular baseado na idade
    if pet_data['idade'] < 1:
        score += 1.0
    elif pet_data['idade'] <= 3:
        score += 0.8
    
    return min(5.0, score)

# ‚ùå Ruim
def calc_score(data):
    if not data.get('idade'):return 0
    score=0.0
    if data['idade']<1:score+=1.0
    elif data['idade']<=3:score+=0.8
    return min(5.0,score)
```

#### Streamlit Components

```python
# ‚úÖ Bom
def display_pet_metrics(df: pd.DataFrame) -> None:
    """Exibe m√©tricas dos pets de forma organizada."""
    if df.empty:
        st.warning("Nenhum dado dispon√≠vel")
        return
    
    col1, col2, col3 = st.columns(3)
    
    with col1:
        total_pets = len(df)
        st.metric("Total de Pets", total_pets)
    
    with col2:
        adopted_pets = df['adotado'].sum()
        st.metric("Pets Adotados", adopted_pets)
    
    with col3:
        adoption_rate = (adopted_pets / total_pets) * 100 if total_pets > 0 else 0
        st.metric("Taxa de Ado√ß√£o", f"{adoption_rate:.1f}%")

# ‚ùå Ruim
def show_metrics(df):
    st.metric("Total", len(df))
    st.metric("Adotados", df['adotado'].sum())
```

#### Machine Learning Code

```python
# ‚úÖ Bom
class PetMLAnalyzer:
    """Analisador de Machine Learning para dados de pets."""
    
    def __init__(self, data: pd.DataFrame):
        """
        Inicializa o analisador com dados dos pets.
        
        Args:
            data (pd.DataFrame): DataFrame com dados dos pets
        """
        self.data = data.copy()
        self.models = {}
        self.scalers = {}
        
    def preprocess_data(self, target_column: str = None) -> pd.DataFrame:
        """
        Preprocessa os dados para an√°lise ML.
        
        Args:
            target_column (str, optional): Coluna alvo para supervised learning
            
        Returns:
            pd.DataFrame: Dados preprocessados
        """
        # Implementa√ß√£o...
        pass
```

### 5. Testes

#### Estrutura de Testes

```
tests/
‚îú‚îÄ‚îÄ unit/                    # Testes unit√°rios
‚îÇ   ‚îú‚îÄ‚îÄ test_auth.py
‚îÇ   ‚îú‚îÄ‚îÄ test_ml.py
‚îÇ   ‚îî‚îÄ‚îÄ test_database.py
‚îú‚îÄ‚îÄ integration/             # Testes de integra√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ test_api.py
‚îÇ   ‚îî‚îÄ‚îÄ test_workflows.py
‚îú‚îÄ‚îÄ e2e/                    # Testes end-to-end
‚îÇ   ‚îî‚îÄ‚îÄ test_user_journey.py
‚îú‚îÄ‚îÄ fixtures/               # Dados para testes
‚îÇ   ‚îî‚îÄ‚îÄ sample_data.csv
‚îî‚îÄ‚îÄ conftest.py            # Configura√ß√µes pytest
```

#### Exemplo de Teste

```python
import pytest
import pandas as pd
from app import calculate_adoption_score, PetMLAnalyzer

class TestAdoptionScore:
    """Testes para c√°lculo de score de ado√ß√£o."""
    
    def test_young_pet_high_score(self):
        """Pets jovens devem ter score alto."""
        pet_data = {'idade': 0.5, 'sociabilidade': 5, 'energia': 4}
        score = calculate_adoption_score(pet_data)
        assert score >= 4.0
        
    def test_old_pet_lower_score(self):
        """Pets idosos devem ter score menor."""
        pet_data = {'idade': 12, 'sociabilidade': 3, 'energia': 2}
        score = calculate_adoption_score(pet_data)
        assert score < 3.0
        
    def test_invalid_data_raises_error(self):
        """Dados inv√°lidos devem gerar erro."""
        with pytest.raises(ValueError):
            calculate_adoption_score({})

class TestMLAnalyzer:
    """Testes para analisador ML."""
    
    @pytest.fixture
    def sample_data(self):
        """Dados de exemplo para testes."""
        return pd.DataFrame({
            'nome': ['Rex', 'Bella', 'Max'],
            'idade': [2, 5, 1],
            'peso': [25, 8, 30],
            'sociabilidade': [5, 3, 4],
            'adotado': [True, False, True]
        })
    
    def test_analyzer_initialization(self, sample_data):
        """Testa inicializa√ß√£o do analisador."""
        analyzer = PetMLAnalyzer(sample_data)
        assert len(analyzer.data) == 3
        assert 'nome' in analyzer.data.columns
```

#### Executando Testes

```bash
# Todos os testes
pytest

# Testes espec√≠ficos
pytest tests/unit/test_ml.py

# Com cobertura
pytest --cov=app tests/

# Verbose
pytest -v

# Parar no primeiro erro
pytest -x
```

### 6. Documenta√ß√£o

#### Docstrings

Use docstrings no formato Google:

```python
def complex_function(param1: int, param2: str, param3: bool = False) -> dict:
    """
    Fun√ß√£o que executa opera√ß√£o complexa.
    
    Args:
        param1 (int): Primeiro par√¢metro
        param2 (str): Segundo par√¢metro
        param3 (bool, optional): Terceiro par√¢metro. Defaults to False.
        
    Returns:
        dict: Resultado da opera√ß√£o com as chaves:
            - success (bool): Se a opera√ß√£o foi bem-sucedida
            - data (any): Dados resultantes
            - message (str): Mensagem descritiva
            
    Raises:
        ValueError: Se param1 for negativo
        TypeError: Se param2 n√£o for string
        
    Example:
        >>> result = complex_function(42, "test", True)
        >>> print(result['success'])
        True
    """
```

#### README e Documenta√ß√£o

- Mantenha o README atualizado
- Adicione exemplos de uso
- Documente APIs e configura√ß√µes
- Use screenshots quando apropriado

### 7. Pull Request

#### Preparando o PR

```bash
# Certifique-se que est√° na branch correta
git status

# Execute testes
pytest

# Execute linting
flake8 .
black --check .
isort --check-only .

# Push da branch
git push origin feature/minha-funcionalidade
```

#### Template de Pull Request

```markdown
## Descri√ß√£o
Breve descri√ß√£o do que este PR faz.

## Tipo de Mudan√ßa
- [ ] Bug fix (mudan√ßa que corrige um problema)
- [ ] Nova funcionalidade (mudan√ßa que adiciona funcionalidade)
- [ ] Breaking change (mudan√ßa que quebra compatibilidade)
- [ ] Documenta√ß√£o (mudan√ßa apenas na documenta√ß√£o)

## Como Testar
Descreva como testar as mudan√ßas:
1. Execute `./run.sh`
2. Navegue para '...'
3. Clique em '...'
4. Verifique que '...'

## Checklist
- [ ] Meu c√≥digo segue as diretrizes de estilo do projeto
- [ ] Realizei uma auto-revis√£o do meu c√≥digo
- [ ] Comentei meu c√≥digo em partes dif√≠ceis de entender
- [ ] Fiz mudan√ßas correspondentes na documenta√ß√£o
- [ ] Minhas mudan√ßas n√£o geram novos warnings
- [ ] Adicionei testes que provam que minha corre√ß√£o funciona
- [ ] Testes novos e existentes passam localmente

## Screenshots (se aplic√°vel)
Adicione screenshots para mudan√ßas visuais.

## Issues Relacionadas
Fixes #123
```

### 8. Code Review

#### Para Revisores

- ‚úÖ **Seja Construtivo**: Feedback deve ajudar a melhorar
- ‚úÖ **Seja Espec√≠fico**: Aponte problemas exatos e sugira solu√ß√µes
- ‚úÖ **Teste Localmente**: Se poss√≠vel, teste as mudan√ßas
- ‚úÖ **Verifique Docs**: Documenta√ß√£o foi atualizada?

#### Para Autores

- ‚úÖ **Responda Rapidamente**: Endere√ße feedback em tempo h√°bil
- ‚úÖ **Seja Receptivo**: Use feedback para aprender
- ‚úÖ **Teste Suas Mudan√ßas**: Certifique-se que tudo funciona
- ‚úÖ **Mantenha PRs Pequenos**: Facilita revis√£o

## üé® UI/UX Guidelines

### Princ√≠pios de Design

1. **Simplicidade**: Interface limpa e intuitiva
2. **Consist√™ncia**: Padr√µes visuais uniformes
3. **Acessibilidade**: Funciona para todos os usu√°rios
4. **Performance**: Carregamento r√°pido e responsivo

### Padr√µes Visuais

```python
# Cores padr√£o
PRIMARY_COLOR = "#4CAF50"
SECONDARY_COLOR = "#66BB6A"
ERROR_COLOR = "#F44336"
WARNING_COLOR = "#FF9800"
SUCCESS_COLOR = "#4CAF50"

# Uso em Streamlit
st.success("‚úÖ Opera√ß√£o realizada com sucesso!")
st.error("‚ùå Erro ao executar opera√ß√£o")
st.warning("‚ö†Ô∏è Aten√ß√£o necess√°ria")
st.info("‚ÑπÔ∏è Informa√ß√£o importante")
```

### Componentes Reutiliz√°veis

```python
def custom_metric(titulo: str, valor: str, subtexto: str = None, cor: str = "#2196F3"):
    """Componente de m√©trica personalizada."""
    st.markdown(f"""
        <div style="background-color: #FFFFFF; border-radius: 5px; 
                    padding: 15px; margin-bottom: 10px; 
                    box-shadow: 0 1px 3px rgba(0,0,0,0.12);">
            <h3 style="color: {cor}; margin: 0; font-size: 36px; 
                       font-weight: bold;">{valor}</h3>
            <p style="color: #666; margin: 0; font-size: 14px; 
                      margin-top: 5px;">{titulo}</p>
            {"" if subtexto is None else f'<p style="color: #888; margin: 0; font-size: 12px;">{subtexto}</p>'}
        </div>
    """, unsafe_allow_html=True)
```

## üîí Seguran√ßa

### Diretrizes de Seguran√ßa

1. **Nunca commite credenciais**: Use .env para configura√ß√µes sens√≠veis
2. **Valide entradas**: Sempre valide dados de usu√°rio
3. **Sanitize outputs**: Previna XSS em conte√∫do din√¢mico
4. **Use HTTPS**: Em produ√ß√£o, sempre force HTTPS

### Exemplo de Valida√ß√£o

```python
def validate_pet_data(data: dict) -> tuple[bool, str]:
    """Valida dados de entrada de pet."""
    if not data.get('nome') or len(data['nome'].strip()) == 0:
        return False, "Nome √© obrigat√≥rio"
    
    if data.get('idade', 0) < 0 or data.get('idade', 0) > 30:
        return False, "Idade deve estar entre 0 e 30 anos"
    
    allowed_types = ['Cachorro', 'Gato', 'Ave', 'Roedor', 'R√©ptil']
    if data.get('tipo_pet') not in allowed_types:
        return False, f"Tipo deve ser um de: {', '.join(allowed_types)}"
    
    return True, ""
```

## üÜò Suporte

### Onde Obter Ajuda

- **üìñ Documenta√ß√£o**: Verifique docs/ primeiro
- **üí¨ Discussions**: Para perguntas gerais
- **üêõ Issues**: Para bugs espec√≠ficos
- **üìß Email**: contato@petcareai.com

### FAQ

**P: Como configurar o ambiente de desenvolvimento?**
R: Execute `./install.sh` seguido de `./configure.sh`

**P: Posso contribuir sem conhecimento em ML?**
R: Sim! H√° muitas √°reas como UI, documenta√ß√£o, testes, etc.

**P: Como reportar vulnerabilidades de seguran√ßa?**
R: Envie email para security@petcareai.com (n√£o abra issue p√∫blica)

## üôè Reconhecimento

Contribui√ß√µes s√£o reconhecidas em:

- üìã **CONTRIBUTORS.md**: Lista de todos os contribuidores
- üèÜ **Release Notes**: Destaques em releases
- üåü **GitHub**: Stars e badges de contribuidor

### Tipos de Contribuidores

- üêõ **Bug Hunters**: Reportam e corrigem bugs
- üí° **Feature Creators**: Implementam novas funcionalidades
- üìù **Documentarians**: Melhoram documenta√ß√£o
- üé® **Designers**: Aprimoram UI/UX
- üß™ **Testers**: Escrevem e mant√™m testes
- üåç **Translators**: Ajudam com internacionaliza√ß√£o

---

**Obrigado por contribuir com o PetCareAI Analytics! Juntos, estamos criando uma ferramenta que realmente faz a diferen√ßa na vida dos pets e fam√≠lias. üêæ‚ù§Ô∏è**
